{"version":3,"sources":["webpack:///js/userpage.js","webpack:///./src/common/js/containers/realworld/UserPage.jsx"],"names":["webpackJsonp","620","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","loadData","props","login","loadUser","loadStarred","mapStateToProps","state","routing","locationBeforeTransitions","pathname","substring","_state$realworld","realworld","starredByUser","pagination","_state$realworld$enti","entities","users","repos","starredPagination","ids","starredRepos","map","id","starredRepoOwners","repo","owner","user","defineProperty","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","err","Array","isArray","_createClass","defineProperties","descriptor","protoProps","staticProps","_react","_react2","_reactRedux","_realworld","_User","_User2","_Repo","_Repo2","_List","_List2","_lodash","_lodash2","zip","UserPage","_Component","this","_this","getPrototypeOf","renderRepo","bind","handleLoadMoreClick","nextProps","_ref","_ref2","createElement","fullName","_props","_props2","className","renderItem","items","onLoadMoreClick","loadingLabel","Component","propTypes","PropTypes","string","isRequired","object","array","func","connect"],"mappings":"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","file":"js/userpage.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 620:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(192);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactRedux = __webpack_require__(417);\n\t\n\tvar _realworld = __webpack_require__(511);\n\t\n\tvar _User = __webpack_require__(602);\n\t\n\tvar _User2 = _interopRequireDefault(_User);\n\t\n\tvar _Repo = __webpack_require__(601);\n\t\n\tvar _Repo2 = _interopRequireDefault(_Repo);\n\t\n\tvar _List = __webpack_require__(603);\n\t\n\tvar _List2 = _interopRequireDefault(_List);\n\t\n\tvar _lodash = __webpack_require__(621);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @authors zx.wang (zx.wang1991@gmail.com)\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @date    2016-08-08 16:01:22\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @version $Id$\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\tvar zip = _lodash2.default.zip;\n\t\n\tfunction loadData(props) {\n\t  var login = props.login;\n\t  //console.log(login);\n\t\n\t  props.loadUser(login, ['name']);\n\t  props.loadStarred(login);\n\t}\n\t\n\tvar UserPage = function (_Component) {\n\t  _inherits(UserPage, _Component);\n\t\n\t  function UserPage(props) {\n\t    _classCallCheck(this, UserPage);\n\t\n\t    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(UserPage).call(this, props));\n\t\n\t    _this.renderRepo = _this.renderRepo.bind(_this);\n\t    _this.handleLoadMoreClick = _this.handleLoadMoreClick.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  //在挂载发生之前立即被调用\n\t\n\t\n\t  _createClass(UserPage, [{\n\t    key: 'componentWillMount',\n\t    value: function componentWillMount() {\n\t      loadData(this.props);\n\t    }\n\t\n\t    //当一个挂载的组件接收到新的props的时候被调用\n\t\n\t  }, {\n\t    key: 'componentWillReceiveProps',\n\t    value: function componentWillReceiveProps(nextProps) {\n\t      if (nextProps.login !== this.props.login) {\n\t        loadData(nextProps);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'handleLoadMoreClick',\n\t    value: function handleLoadMoreClick() {\n\t      this.props.loadStarred(this.props.login, true);\n\t    }\n\t  }, {\n\t    key: 'renderRepo',\n\t    value: function renderRepo(_ref) {\n\t      var _ref2 = _slicedToArray(_ref, 2);\n\t\n\t      var repo = _ref2[0];\n\t      var owner = _ref2[1];\n\t\n\t      return _react2.default.createElement(_Repo2.default, { repo: repo,\n\t        owner: owner,\n\t        key: repo.fullName });\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _props = this.props;\n\t      var user = _props.user;\n\t      var login = _props.login;\n\t\n\t      if (!user) {\n\t        return _react2.default.createElement(\n\t          'h1',\n\t          null,\n\t          _react2.default.createElement(\n\t            'i',\n\t            null,\n\t            'Loading ',\n\t            login,\n\t            '’s profile...'\n\t          )\n\t        );\n\t      }\n\t\n\t      var _props2 = this.props;\n\t      var starredRepos = _props2.starredRepos;\n\t      var starredRepoOwners = _props2.starredRepoOwners;\n\t      var starredPagination = _props2.starredPagination;\n\t\n\t      return _react2.default.createElement(\n\t        'div',\n\t        { className: 'rl-user' },\n\t        _react2.default.createElement(_User2.default, { user: user }),\n\t        _react2.default.createElement(_List2.default, _extends({ renderItem: this.renderRepo,\n\t          items: zip(starredRepos, starredRepoOwners),\n\t          onLoadMoreClick: this.handleLoadMoreClick,\n\t          loadingLabel: 'Loading ' + login + '’s starred...'\n\t        }, starredPagination))\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return UserPage;\n\t}(_react.Component);\n\t\n\tUserPage.propTypes = {\n\t  login: _react.PropTypes.string.isRequired,\n\t  user: _react.PropTypes.object,\n\t  starredPagination: _react.PropTypes.object,\n\t  starredRepos: _react.PropTypes.array.isRequired,\n\t  starredRepoOwners: _react.PropTypes.array.isRequired,\n\t  loadUser: _react.PropTypes.func.isRequired,\n\t  loadStarred: _react.PropTypes.func.isRequired\n\t};\n\t\n\t\n\tfunction mapStateToProps(state) {\n\t  //console.log(state);\n\t  var login = state.routing.locationBeforeTransitions.pathname.substring(11);\n\t  var _state$realworld = state.realworld;\n\t  var starredByUser = _state$realworld.pagination.starredByUser;\n\t  var _state$realworld$enti = _state$realworld.entities;\n\t  var users = _state$realworld$enti.users;\n\t  var repos = _state$realworld$enti.repos;\n\t\n\t\n\t  var starredPagination = starredByUser[login] || { ids: [] };\n\t  var starredRepos = starredPagination.ids.map(function (id) {\n\t    return repos[id];\n\t  });\n\t  var starredRepoOwners = starredRepos.map(function (repo) {\n\t    return users[repo.owner];\n\t  });\n\t\n\t  return {\n\t    login: login,\n\t    starredRepos: starredRepos,\n\t    starredRepoOwners: starredRepoOwners,\n\t    starredPagination: starredPagination,\n\t    user: users[login]\n\t  };\n\t}\n\t\n\texports.default = (0, _reactRedux.connect)(mapStateToProps, {\n\t  loadUser: _realworld.loadUser,\n\t  loadStarred: _realworld.loadStarred\n\t})(UserPage);\n\tmodule.exports = exports['default'];\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** js/userpage.js\n **/","/**\n *\n * @authors zx.wang (zx.wang1991@gmail.com)\n * @date    2016-08-08 16:01:22\n * @version $Id$\n */\nimport React, { Component, PropTypes } from 'react'\nimport { connect } from 'react-redux'\nimport { loadUser, loadStarred } from '../../actions/realworld'\nimport User from '../../components/realworld/User'\nimport Repo from '../../components/realworld/Repo'\nimport List from '../../components/realworld/List'\nimport _ from 'lodash';\nconst zip = _.zip;\n\nfunction loadData(props) {\n  const { login } = props;\n  //console.log(login);\n  props.loadUser(login, [ 'name' ])\n  props.loadStarred(login)\n}\n\nclass UserPage extends Component {\n  static propTypes = {\n    login: PropTypes.string.isRequired,\n    user: PropTypes.object,\n    starredPagination: PropTypes.object,\n    starredRepos: PropTypes.array.isRequired,\n    starredRepoOwners: PropTypes.array.isRequired,\n    loadUser: PropTypes.func.isRequired,\n    loadStarred: PropTypes.func.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n    this.renderRepo = this.renderRepo.bind(this)\n    this.handleLoadMoreClick = this.handleLoadMoreClick.bind(this)\n  }\n\n  //在挂载发生之前立即被调用\n  componentWillMount() {\n    loadData(this.props)\n  }\n\n  //当一个挂载的组件接收到新的props的时候被调用\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.login !== this.props.login) {\n      loadData(nextProps)\n    }\n  }\n\n  handleLoadMoreClick() {\n    this.props.loadStarred(this.props.login, true)\n  }\n\n  renderRepo([ repo, owner ]) {\n    return (\n      <Repo repo={repo}\n            owner={owner}\n            key={repo.fullName} />\n    )\n  }\n\n  render() {\n\n    const { user, login } = this.props;\n    if (!user) {\n      return <h1><i>Loading {login}’s profile...</i></h1>\n    }\n\n    const { starredRepos, starredRepoOwners, starredPagination } = this.props\n    return (\n      <div className=\"rl-user\">\n        <User user={user} />\n        <List renderItem={this.renderRepo}\n              items={zip(starredRepos, starredRepoOwners)}\n              onLoadMoreClick={this.handleLoadMoreClick}\n              loadingLabel={`Loading ${login}’s starred...`}\n              {...starredPagination} />\n      </div>\n    )\n  }\n}\n\n\nfunction mapStateToProps(state) {\n  //console.log(state);\n  const  login  = state.routing.locationBeforeTransitions.pathname.substring(11);\n  const {\n    pagination: { starredByUser },\n    entities: { users, repos }\n  } = state.realworld;\n\n  const starredPagination = starredByUser[login] || { ids: [] }\n  const starredRepos = starredPagination.ids.map(id => repos[id])\n  const starredRepoOwners = starredRepos.map(repo => users[repo.owner])\n\n  return {\n    login,\n    starredRepos,\n    starredRepoOwners,\n    starredPagination,\n    user: users[login]\n  }\n}\n\nexport default connect(mapStateToProps, {\n  loadUser,\n  loadStarred\n})(UserPage)\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/js/containers/realworld/UserPage.jsx\n **/"],"sourceRoot":""}